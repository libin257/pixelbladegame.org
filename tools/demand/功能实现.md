下面把「暖值矩阵热图」的数据展示方案与「配方速查器」轻量功能拆开，按**为什么选它 → 数据/API 来源 → 一次性落地 → 前端实现**四步讲透。每一步都给出**可直接访问的具体链接、请求示例、JSON Schema**，让你复制即可跑。

---

## 数据展示：**「暖值矩阵热图」**

### 1. 选题理由

* “穿哪件衣服能撑多久？”是玩家最常搜索、也是 Steam 攻略区被反复提问的高频痛点。([Winter Burrow][1])
* 同类攻略目前都是长段文字，没有一眼能看懂的可视化。([Blizzard Watch][2])

### 2. 数据源与一次性抓取

| 数据               | 说明                                                              | 抓取方式                                                                                                                                                              |
| ---------------- | --------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **衣物暖值 & 名称**    | 社区作者维护的 **Google Sheet**（含衣物、食物、工具多表）([Reddit][3])              | 一次性导出 CSV:<br>`curl -L "https://docs.google.com/spreadsheets/d/13ko-YyLuwweD8L-ejDOo4ZPVE3vsyjAni5ioz2M5akE/export?gid=0&format=csv" -o public/data/clothing.csv` |
| **官方/半官方暖值计算公式** | Fan Toolkit 公开的 `finalWarmth` 公式（含 gearWarmth、天气系数等）([冬季巢穴][4]) | 直接硬编码于本地 `utils/warmth.ts`                                                                                                                                        |
| **温度区间**         | −15 ℃ → +5 ℃ 共 21 档，满足游戏天气随机表。([Winter Burrow][1])              | 手写数组或在脚本里生成                                                                                                                                                       |

> **落地**：在 `scripts/build-warmth.ts` 里把 CSV→JSON，计算每件衣物在每个温度档的可活动分钟数，输出 `/public/data/warmth.json`，前端无需再打 API。

#### JSON 结构示例

```json
[
  {
    "item":"Thick Sweater",
    "warmth":15,
    "duration":[18,16,14,12,10]  // 对应 +5℃→−15℃
  }
]
```

### 3. 前端实现步骤（Next.js + D3.js）

1. **数据读取**

   ```ts
   import data from '@/public/data/warmth.json';
   ```
2. **热图绘制**

   * 用 D3 `scaleBand` 生成横轴(温度)与纵轴(衣物)。
   * `scaleLinear` 把分钟数映射到颜色深浅（蓝→橙）。
3. **交互**

   * `onMouseOver` Tooltip 显示“在 −5℃ 可外出 12 min”。
   * `filter` 复选框允许只看“≥15 Warmth”的衣物。
4. **动画**：页面滚动到可视区时，`IntersectionObserver` 触发 `opacity` 从 0→1 的淡入效果，炫酷又不重载。

### 4. 位置与调用

放在 `/map` 与 `/warmth-tool` 之间的整版 Section；Hero 背景半透明毛玻璃，确保颜色梯度抢眼。

---

## 轻量小功能：**「配方速查器」**

### 1. 选题理由

* 玩家合成前反复 Alt+Tab 查配方，对停留和回访最有拉动力。([Steam社区][5])

### 2. 数据/文章来源

| 数据        | 来源 & 作用                                                                   | 抓取方法                                                                                                                                                        |
| --------- | ------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **完整配方表** | 同一 Google Sheet 的 “Recipes” 工作表（gid=1380093282）([Reddit][3])              | `curl -L "https://docs.google.com/spreadsheets/d/13ko-YyLuwweD8L-ejDOo4ZPVE3vsyjAni5ioz2M5akE/export?gid=1380093282&format=csv" -o public/data/recipes.csv` |
| **制作台信息** | WinterBurrow.site 的 Crafting Guide 提供“需要工作台/熔炉”等列([winter-burrow.com][6]) | 同步写入脚本                                                                                                                                                      |

> 单点拉取后用 `scripts/recipes-csv2json.ts` 生成 `/public/data/recipes.json`。

#### JSON 结构示例

```json
[
  {
    "item":"Stone Axe",
    "materials":[["Stone",2],["Stick",3],["Fiber",2]],
    "station":"Handcraft"
  }
]
```

### 3. 用户交互与处理逻辑

| 步骤       | 细节                                                                     |
| -------- | ---------------------------------------------------------------------- |
| **输入**   | a) 多选下拉`<Select>`列出全部素材；b) 可选“拥有工作台/熔炉” CheckBox                       |
| **处理**   | 前端加载 `recipes.json`，用 `Array.every()` 判断所选素材是否覆盖材料列表；同时过滤掉需要更高级制作台的配方。 |
| **输出**   | ① 卡片列表：图标 + 名称 + 缺失材料提示；② 支持点击跳至 `/recipes#StoneAxe` 内链做深阅读。           |
| **现状替代** | 玩家多标签页对照 Wiki → 费时、易漏材料；本工具一秒出结果。([Reddit][7])                         |

### 4. 前端实现片段（React Hook）

```tsx
const [have, setHave] = useState<string[]>([]);
const matches = recipes.filter(r =>
  r.materials.every(([mat]) => have.includes(mat)) &&
  (hasStation || r.station === 'Handcraft')
);
```

### 5. UI 位置

在 `/recipes` 详情页顶部插入 `<RecipeFinder />` 组件；配方表放底部，形成“先筛→再读”的渐进体验。

---

## 技术选型 & 性能注意

| 环节   | 技术                       | 原因                                       |
| ---- | ------------------------ | ---------------------------------------- |
| 数据抓取 | Node 脚本 + `csv-parse`    | CLI 一键导出，后续数据更新只需重新跑脚本                   |
| 可视化  | D3.js v7                 | 渐变色热图、Hover 交互灵活；体积可 tree-shake 到 <35 kB |
| 状态管理 | 纯 React `useState`       | 功能单一，无需 Redux / Zustand                  |
| 构建缓存 | Next.js `getStaticProps` | 部署时一次性读取 JSON，前端无额外请求                    |
| 移动优化 | `overflow-x:auto` + 横向滑动 | 保证热图在手机上可滚动而不缩成蚂蚁字                       |

---

### 一句话回顾

两段数据各抓一次 CSV → JSON，即可在**不调外部 API、不加后端服务**的前提下，把玩家“保暖焦虑”与“配方查询”痛点，变成站内高频交互，从而显著延长停留时长与回访率。

[1]: https://winterburrow.net/how-to-stay-warm-in-winter-burrow?utm_source=chatgpt.com "How to Stay Warm in Winter Burrow - Complete Guide"
[2]: https://blizzardwatch.com/2025/11/13/winter-burrow-is-adorable-and-a-cozy-game-to-play-that-its-freezing-out/?utm_source=chatgpt.com "Winter Burrow is a cozy game with surprisingly tricky ..."
[3]: https://www.reddit.com/r/CozyGamers/comments/1ox258o/winter_burrow_crafting_spreadsheet_and_item_guide/?utm_source=chatgpt.com "Winter Burrow Crafting Spreadsheet and Item Guide"
[4]: https://winterburrow.org/ "Winter Burrow Survival Toolkit"
[5]: https://steamcommunity.com/sharedfiles/filedetails/?id=3604470202&utm_source=chatgpt.com "Winter Burrow Guide: Survive Your First Winter (WIP)"
[6]: https://winter-burrow.com/guide/crafting/?utm_source=chatgpt.com "Crafting Guide - Winter Burrow All Recipes & Materials"
[7]: https://www.reddit.com/r/cozygames/comments/1ovmjea/i_have_no_idea_how_to_progress_in_winter_burrow/?utm_source=chatgpt.com "I have no idea how to progress in Winter Burrow."
